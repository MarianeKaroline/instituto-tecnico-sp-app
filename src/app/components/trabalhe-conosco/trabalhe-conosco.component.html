<div class="h-72 bg-linear-140 from-[#dbe9ea] to-[#7dc387] flex items-center justify-center relative">

    <span class="text-blue-variant text-5xl font-epilogue font-medium">Trabalhe Conosco</span>

    <div class="w-6 h-6 rounded-full absolute top-8 left-48 bg-primary"></div>
    <div class="w-4 h-4 rounded-full absolute bottom-12 right-48 bg-tertiary"></div>

    <div class="w-[210px] h-[210px] polka-dots absolute bottom-0 lg:bottom-24 -right-24 lg:right-48 z-10"></div>

</div>

<div class="py-24 px-8 lg:px-48 relative custom-padding">

    <div class="bg-[#c8dfd2] p-4 md:p-16 flex gap-12 rounded-md shadow-sm">

        <div class="flex flex-col gap-4 w-full relative">
            <span class="text-blue text-2xl font-epilogue font-medium">Venha fazer parte da nossa equipe!</span>

            <span class="text-blue text-sm font-epilogue font-light">Envie seu currículo e entraremos em contato</span>

            <form 
                [formGroup]="form" 
                class="flex flex-col w-full font-body">

                <!-- Nome -->
                <div class="flex flex-col mt-4">
                    <span class="font-normal mb-2 text-sm">Nome Completo *</span>
                    <mat-form-field class="flex-auto" appearance="outline">

                        <input matInput type="text" formControlName="nomeCompleto" placeholder="Nome">
                        <mat-error *ngIf="form?.get('nomeCompleto')?.touched && form?.get('nomeCompleto')?.errors">
                            Nome inválido
                        </mat-error>

                    </mat-form-field>
                </div>

                <div class="flex flex-col md:flex-row gap-4 w-full">

                    <!-- Data Nascimento -->
                    <div class="flex flex-col mt-2 w-full">
                        <span class="font-normal mb-2 text-sm">Data de nascimento *</span>
                        <mat-form-field class="flex-auto" appearance="outline">    
                            <input matInput [matDatepicker]="picker" formControlName="dataNascimento">
                            <mat-hint>MM/DD/YYYY</mat-hint>
                            <mat-datepicker-toggle matIconSuffix [for]="picker">
                                <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                            </mat-datepicker-toggle>
                            <mat-datepicker #picker></mat-datepicker>
                            <mat-error *ngIf="form?.get('dataNascimento')?.touched && form?.get('dataNascimento')?.errors">
                                Data de nascimento inválida
                            </mat-error>
    
                        </mat-form-field>
                    </div>
    
                    <!-- Gênero -->
                    <div class="flex flex-col mt-2 w-full">
                        <span class="font-normal mb-2 text-sm">Gênero *</span>
                        <mat-form-field class="flex-auto" appearance="outline">
    
                            <mat-select formControlName="genero" placeholder="Genero">
                                <!-- Options -->
                                @for (genero of generos; track $index) {
                                    <mat-option [value]="genero">{{ genero }}</mat-option>
                                }
                            </mat-select>
                            <mat-error *ngIf="form?.get('genero')?.touched && form?.get('genero')?.errors">
                                Gênero inválido
                            </mat-error>
    
                        </mat-form-field>
                    </div>

                </div>

                <!-- Email -->
                <div class="flex flex-col mt-2">
                    <span class="font-normal mb-2 text-sm">E-mail *</span>
                    <mat-form-field class="flex-auto" appearance="outline">

                        <input matInput type="text" formControlName="email" placeholder="E-mail">
                        <mat-error *ngIf="form?.get('email')?.touched && form?.get('email')?.errors">
                            E-mail inválido
                        </mat-error>

                    </mat-form-field>
                </div>

                <!-- Celular -->
                <div class="flex flex-col mt-2">
                    <span class="font-normal mb-2 text-sm">Celular *</span>
                    <mat-form-field class="flex-auto" appearance="outline">

                        <input matInput type="text" formControlName="celular" placeholder="Celular" [mask]="mask">
                        <mat-error *ngIf="form?.get('celular')?.touched && form?.get('celular')?.errors">
                            Número de telefone inválido
                        </mat-error>

                    </mat-form-field>
                </div>

                <div class="flex flex-col md:flex-row gap-4 w-full">

                    <!-- Estado -->
                    <div class="flex flex-col mt-2 w-full">
                        <span class="font-normal mb-2 text-sm">Estado *</span>
                        <mat-form-field class="flex-auto" appearance="outline">
    
                            <mat-select formControlName="estado" placeholder="Estado">
                                <!-- Options -->
                                @for (estado of estados; track $index) {
                                    <mat-option [value]="estado.sigla">{{ estado.nome }}</mat-option>
                                }
                            </mat-select>
                            <mat-error *ngIf="form?.get('estado')?.touched && form?.get('estado')?.errors">
                                Estado inválido
                            </mat-error>
    
                        </mat-form-field>
                    </div>
    
                    <!-- Cidade -->
                    <div class="flex flex-col mt-2 w-full">
                        <span class="font-normal mb-2 text-sm">Cidade *</span>
                        <mat-form-field class="flex-auto" appearance="outline">
    
                            <mat-select formControlName="cidade" placeholder="Cidade">
                                <!-- Options -->
                                @for (cidade of cidades; track $index) {
                                    <mat-option [value]="cidade.nome">{{ cidade.nome }}</mat-option>
                                }
                            </mat-select>
                            <mat-error *ngIf="form?.get('cidade')?.touched && form?.get('cidade')?.errors">
                                Cidade inválida
                            </mat-error>
    
                        </mat-form-field>
                    </div>

                </div>

                <input class="hidden" type="file" [accept]="'.pdf'" (change)="onSelectedFile($event)" #fileInput>
                <button
                    mat-stroked-button
                    type="button"
                    [color]="'primary'"
                    (click)="fileInput.click()"
                    class="w-50">
                    <mat-icon>attach_file</mat-icon>
                    <span class="ml-2 mr-1 hidden lg:block">Anexar Curriculo</span>
                </button>

                <button class="w-full font-title font-medium text-sm group relative h-12 overflow-hidden overflow-x-hidden rounded-full bg-[#0E9549] px-8 py-2 mt-8 text-neutral-50 cursor-pointer" (click)="enviarEmail()">
                
                    @if (!loading) {
                        <span class="relative z-10 font-medium">Enviar</span>
                    } @else {
                        <div class="flex items-center justify-center gap-2">
                            <mat-icon class="animate-spin">autorenew</mat-icon> 
                            <span class="relative z-10 font-medium">Enviando</span>
                        </div>
                    }
        
                    <span class="absolute inset-0 overflow-hidden rounded-full">
                        <span class="absolute left-0 aspect-square w-full origin-center -translate-x-full rounded-full bg-secondary transition-all duration-500 group-hover:-translate-x-0 group-hover:scale-150"></span>
                    </span>
        
                </button>

            </form>
            
        </div>        

    </div>
    
    <div class="w-[210px] h-[210px] polka-dots absolute -bottom-12 left-12 -z-10"></div>
    
</div>